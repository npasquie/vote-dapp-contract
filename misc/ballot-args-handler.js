let web3 = require("web3");

module.exports = {
  ballotArgsHandler: function (
        name,
        question,
        endTime,
        votersCodeHashes,
        externalitiesEnabled,
        pictureHashes,
        candidateNames)
  {
    return [
      this.strToBytes32(name),
      this.strToBytes32(question),
      endTime,
      this.strListToListBytes32(votersCodeHashes),
      externalitiesEnabled,
      this.strListToListBytes32(pictureHashes),
      this.strListToListBytes32(candidateNames)
    ];
  },

  strToBytes32: function (str) {
    let ret;
    ret = web3.utils.utf8ToHex(str);
    ret = web3.utils.hexToBytes(ret);
    return ret.slice(0, 32);
  },

  strListToListBytes32: function (list) {
    let ret = [];
    list.forEach((el, i) => {
      ret[i] = this.strToBytes32(el);
    });
    return ret;
  },

  strToHash: function (str) {
    let ret = web3.utils.utf8ToHex(str);
    ret = web3.utils.hexToBytes(ret);
    ret = ret.slice(0, 32);
    ret = web3.utils.bytesToHex(ret);
    return web3.utils.soliditySha3(ret);
  }

  // //code is generated by server
  // code = web3.utils.utf8ToHex(code);
  // code = web3.utils.hexToBytes(code);
  // code = code.slice(0,32);
  // code = web3.utils.bytesToHex(code);
  // code = web3.utils.soliditySha3(code); //provided by server
  // code = web3.utils.hexToBytes(code);

  // export {ballotArgsHandler,strToHash};
};
